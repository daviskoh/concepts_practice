# Exporting and Requiring Modules in Node.js

## Overview
This file illustrates the differences between various ways to export functions (& modules) in Node.js using the **module** object & the **exports** variable.

## Dependencies
	Node.js
	jasmine-node (or any JS testing framework) for tests
**Note**: if using **Mocha**, you may have to rename the **spec** directory to **test**

## Files & Directories
Modules are written under the **lib** directory. Specs are provided under the **spec** directory to prove concepts.

	lib/
		module1.js
		module2.js
	spec/
		module1_spec.js
		module2_spec.js
	readme.md

module1.js illustrates **module.exports** & module2.js illustrates **exports.functionName**

## Directions

Run

	jasmine-node spec/.

to see all tests pass or run

	jasmine-node spec/specific.js

to see a specific one pass

## module.exports
**module** is a global scope variable inside a file

	module.exports = function module1() {
	  return 'module.exports';
	}
	
	var module1 = require('../lib/module1');
	
**1.)** When the above is written, a **Module** object is created with a new **exports** object {} as a property of the created **Module**:
	
	function Module(id, parent) {
    	this.id = id;
    	this.exports = {};
	    this.parent = parent;
    	if (parent && parent.children) {
        	parent.children.push(this);
	    }

    	this.filename = null;
	    this.loaded = false;
    	this.children = [];
	}

**2.)** When required, the contents of **module1.js** are wrapped like so:

	(function (exports, require, module, __filename, __dirname) { 
		// from module1.js
		module.exports = function module1() { return 'module.exports'; }
	});

**3.)** Then called like so:

	(function (exports, require, module, __filename, __dirname) { 
    	//contents from module1.js
		module.exports = function module1() { return 'module.exports'; }
	})(module.exports,require, module, "module1.js","directory of the module1.js");

With **module** referring to the **Module** object created above

Thus, the **exports** variable in the file scope of the module you are writting, refers to the exports **attribute** of the created **module object**

**4.)** To call the function associate with the **exports** attribute on the **module** object:

	module1() // => 'module.exports'

## exports.functionName

When defining attributes on the **exports** variable, you are defining attributes on the exports **attribute** ( whose value is an object {} ) of the **created module** object.

Thus:

	exports.module2 = function() {
  		return 'exports.module2';
	}

	var module2 = require('../lib/module2');

**module2** will be an object containing all of the attributes & values associated with the **exports** variable

In order to actually access & **call** the function defined on exports here, you will need to specify the particular **attribute** of the **exports** object like so:

	module2.module2() // => 'exports.module2'

If we wanted to export **multiple** functions, we would simply define multiple attributes on the **exports** variable like so:

	exports.function1 = function() {
		return 'I am function1';
	}
	
	exports.function2 = function() {
		return 'I am function2';
	}
	
	exports.function3 = function() {
		return 'I am function3';
	}

Assuming the above was defined in **module2.js**

	var module2 = require(../lib/module2);

	module2.function1() // => 'I am function1'
	module2.function2() // => 'I am function2'
	module2.function3() // => 'I am function3'